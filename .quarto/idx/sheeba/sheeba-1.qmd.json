{"title":"Plot 5: Government GDP","markdown":{"yaml":{"title":"Plot 5: Government GDP","author":"Sheeba","format":{"html":{"embed-resources":true,"code-fold":true,"include-in-header":[{"text":"<script src=\"https://d3js.org/d3.v7.min.js\"></script>\n"}]}}},"containsRefs":false,"markdown":"\n\n```{ojs}\n\n// Import the necessary libraries\nd3 = require('d3@7');\n// Define and load your datasets\nprimaryData = d3.csv('primary_updated.csv', function(d){\n  return {\n    country_name: d.country_name,\n    year1: +d.year1,\n    year2: +d.year2,\n  }\n});\n\nsecondaryData = d3.csv('secondary_updated.csv', function(d){\n  return {\n    country_name: d.country_name,\n    year1: +d.year1,\n    year2: +d.year2,\n  }\n});\n\ntertiaryData = d3.csv('tertiary_updated.csv', function(d){\n  return {\n    country_name: d.country_name,\n    year1: +d.year1,\n    year2: +d.year2,\n  }\n});\n\n// Define metric selection\nviewof metric = Inputs.radio(new Map([[\"Absolute\", \"absolute\"], [\"Relative\", \"relative\"]]), {value: \"absolute\", label: \"Change\"});\n\n// Define dataset selection\nviewof selectedDataset = Inputs.select(['Primary', 'Secondary', 'Tertiary'], {label: 'Select Dataset', value: 'Primary'});\n\n// Visualization width\nwidth = 800;\n\n// Chart rendering function\nasync function chart() {\n  const dataset = await {\n    'Primary': primaryData,\n    'Secondary': secondaryData,\n    'Tertiary': tertiaryData\n  }[selectedDataset.value];\n\n  const data = dataset.map(d => ({\n    country_name: d.country_name,\n    value: metric.value === 'absolute' ? d.year2 - d.year1 : (d.year2 - d.year1) / d.year1\n  }));\n\n  // Visualization parameters\n  const barHeight = 25;\n  const marginTop = 35;\n  const marginRight = 70;\n  const marginBottom = 10;\n  const marginLeft = 120;\n  const height = Math.ceil((data.length + 0.1) * barHeight) + marginTop + marginBottom;\n\n  // Scales\n  const x = d3.scaleLinear()\n    .domain(d3.extent(data, d => d.value))\n    .rangeRound([marginLeft, width - marginRight]);\n\n  const y = d3.scaleBand()\n    .domain(data.map(d => d.country_name))\n    .rangeRound([marginTop, height - marginBottom])\n    .padding(0.1);\n\n  const formatValue = d3.format('.2f'); // Adjust tick format to display small numbers effectively\n\n  // Create SVG element\n  const svg = d3.create('svg')\n    .attr('viewBox', [0, 0, width, height])\n    .style('max-width', '100%')\n    .style('height', 'auto')\n    .style('font-family', 'monospace')\n    .style('font-size', '10px');\n\n  // Draw bars\n  svg.append('g')\n    .selectAll('rect')\n    .data(data)\n    .join('rect')\n    .attr('fill', d => d.value > 0 ? '#3d6469' : '#d40637')\n    .attr('x', d => x(Math.min(d.value, 0)))\n    .attr('y', d => y(d.country_name))\n    .attr('width', d => Math.abs(x(d.value) - x(0)))\n    .attr('height', y.bandwidth());\n\n  // Draw text labels\n  svg.append('g')\n    .attr('font-size', 10)\n    .selectAll('text')\n    .data(data)\n    .join('text')\n    .attr('text-anchor', d => d.value < 0 ? 'end' : 'start')\n    .attr('x', d => x(d.value) + Math.sign(d.value - 0) * 4)\n    .attr('y', d => y(d.country_name) + y.bandwidth() / 2)\n    .attr('dy', '0.35em')\n    .text(d => formatValue(d.value));\n\n  // Append axes\n  svg.append('g')\n    .attr('transform', `translate(0,${marginTop})`)\n    .call(d3.axisTop(x).ticks(width / 80).tickFormat(d3.format('.2f')))\n    .call(g => g.selectAll('.tick line').clone()\n      .attr('y2', height - marginTop - marginBottom)\n      .attr('stroke-opacity', 0.1))\n    .call(g => g.select('.domain').remove());\n\n  svg.append('g')\n    .attr('transform', `translate(${x(0)},0)`)\n    .call(d3.axisLeft(y).tickSize(0).tickPadding(6));\n\n  return svg.node();\n}\n\nchart();\n\n```\n","srcMarkdownNoYaml":"\n\n```{ojs}\n\n// Import the necessary libraries\nd3 = require('d3@7');\n// Define and load your datasets\nprimaryData = d3.csv('primary_updated.csv', function(d){\n  return {\n    country_name: d.country_name,\n    year1: +d.year1,\n    year2: +d.year2,\n  }\n});\n\nsecondaryData = d3.csv('secondary_updated.csv', function(d){\n  return {\n    country_name: d.country_name,\n    year1: +d.year1,\n    year2: +d.year2,\n  }\n});\n\ntertiaryData = d3.csv('tertiary_updated.csv', function(d){\n  return {\n    country_name: d.country_name,\n    year1: +d.year1,\n    year2: +d.year2,\n  }\n});\n\n// Define metric selection\nviewof metric = Inputs.radio(new Map([[\"Absolute\", \"absolute\"], [\"Relative\", \"relative\"]]), {value: \"absolute\", label: \"Change\"});\n\n// Define dataset selection\nviewof selectedDataset = Inputs.select(['Primary', 'Secondary', 'Tertiary'], {label: 'Select Dataset', value: 'Primary'});\n\n// Visualization width\nwidth = 800;\n\n// Chart rendering function\nasync function chart() {\n  const dataset = await {\n    'Primary': primaryData,\n    'Secondary': secondaryData,\n    'Tertiary': tertiaryData\n  }[selectedDataset.value];\n\n  const data = dataset.map(d => ({\n    country_name: d.country_name,\n    value: metric.value === 'absolute' ? d.year2 - d.year1 : (d.year2 - d.year1) / d.year1\n  }));\n\n  // Visualization parameters\n  const barHeight = 25;\n  const marginTop = 35;\n  const marginRight = 70;\n  const marginBottom = 10;\n  const marginLeft = 120;\n  const height = Math.ceil((data.length + 0.1) * barHeight) + marginTop + marginBottom;\n\n  // Scales\n  const x = d3.scaleLinear()\n    .domain(d3.extent(data, d => d.value))\n    .rangeRound([marginLeft, width - marginRight]);\n\n  const y = d3.scaleBand()\n    .domain(data.map(d => d.country_name))\n    .rangeRound([marginTop, height - marginBottom])\n    .padding(0.1);\n\n  const formatValue = d3.format('.2f'); // Adjust tick format to display small numbers effectively\n\n  // Create SVG element\n  const svg = d3.create('svg')\n    .attr('viewBox', [0, 0, width, height])\n    .style('max-width', '100%')\n    .style('height', 'auto')\n    .style('font-family', 'monospace')\n    .style('font-size', '10px');\n\n  // Draw bars\n  svg.append('g')\n    .selectAll('rect')\n    .data(data)\n    .join('rect')\n    .attr('fill', d => d.value > 0 ? '#3d6469' : '#d40637')\n    .attr('x', d => x(Math.min(d.value, 0)))\n    .attr('y', d => y(d.country_name))\n    .attr('width', d => Math.abs(x(d.value) - x(0)))\n    .attr('height', y.bandwidth());\n\n  // Draw text labels\n  svg.append('g')\n    .attr('font-size', 10)\n    .selectAll('text')\n    .data(data)\n    .join('text')\n    .attr('text-anchor', d => d.value < 0 ? 'end' : 'start')\n    .attr('x', d => x(d.value) + Math.sign(d.value - 0) * 4)\n    .attr('y', d => y(d.country_name) + y.bandwidth() / 2)\n    .attr('dy', '0.35em')\n    .text(d => formatValue(d.value));\n\n  // Append axes\n  svg.append('g')\n    .attr('transform', `translate(0,${marginTop})`)\n    .call(d3.axisTop(x).ticks(width / 80).tickFormat(d3.format('.2f')))\n    .call(g => g.selectAll('.tick line').clone()\n      .attr('y2', height - marginTop - marginBottom)\n      .attr('stroke-opacity', 0.1))\n    .call(g => g.select('.domain').remove());\n\n  svg.append('g')\n    .attr('transform', `translate(${x(0)},0)`)\n    .call(d3.axisLeft(y).tickSize(0).tickPadding(6));\n\n  return svg.node();\n}\n\nchart();\n\n```\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"markdown"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":true,"code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true,"format-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","toc":true,"embed-resources":true,"include-in-header":[{"text":"<script src=\"https://d3js.org/d3.v7.min.js\"></script>\n"}],"output-file":"sheeba-1.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.3.450","theme":"lux","title":"Plot 5: Government GDP","author":"Sheeba"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}